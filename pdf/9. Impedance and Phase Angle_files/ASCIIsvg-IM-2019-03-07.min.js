var corpColor="#165a71";window.brdPropsNS={};var doc=document;function gebi(ele){return doc.getElementById(ele);}
function clog(item,lineNum){console.log("lineNum="+lineNum);console.log(item);}
var boundingDiv;var brdID;var svgID;var boardPropsArr=[];var brdPropsArr=[];var viewPortWidth=window.innerWidth,clientWidth=document.body.clientWidth,viewPortHeight=window.innerHeight,clientHeight=document.body.clientHeight;var clientWidthRem=clientWidth,viewPortWidthRem=viewPortWidth,clientHeightRem=clientHeight
viewPortHeightRem=viewPortHeight;var origin;var cx,cy;var dx,dy,labels,gdx,gdy;var xAxisVble="x",yAxisVble="y";var doAxes=1;var showYaxis=1;var doGrids=1;var boardWidth,boardHeight,boardWidthToHeight=0.75,boardLeft,boardTop;var xMin,yMin,xMax,yMax,xunitlength,yunitlength;var xmin,xmax,ymin,ymax,xgrid,ygrid,xtick,ytick,initialized,opacity,stroke,below;var elementIdNum=999;var padding=20;var curveLength=0;var txtLabelsClass="intmath";var dragCnt=0;var plotBeyondXVis=false;var plotBeyondYVis=true;var goToExtremities=false;var draggablePtsOnLine=false;var labelDraggablePts=false;var fontsize="14.4";var gridstroke="#ddd";var ticklength=4;var axesstroke=corpColor;var markerstrokewidth="1";var strokedasharray=null;var strokedashoffset=null;var markerstroke=corpColor;var markerfill=corpColor;var markersize=4;var marker="none";var arrowfill="#555";var dotradius=4;var dotstrokewidth=1;var segstrokewidth=1;var strokeopacity=1;var fillopacity=1;var shaperendering=null;var gliderOn='';var dotDraggable=false;var cpi="\u03C0",ctheta="\u03B8";var pi=Math.PI,ln=Math.log,e=Math.E;var arcsin=Math.asin,arccos=Math.acos,arctan=Math.atan;var sin=function(x){return Math.sin(x)};var cos=function(x){return Math.cos(x)};var tan=function(x){return Math.tan(x)};var sec=function(x){return 1/Math.cos(x)};var csc=function(x){return 1/Math.sin(x)};var cot=function(x){return 1/Math.tan(x)};var logten=function(x){return Math.log(x)/Math.log(10)};var arcsec=function(x){return arccos(1/x)};var arccsc=function(x){return arcsin(1/x)};var arccot=function(x){return arctan(1/x)};var sinh=function(x){return(Math.exp(x)-Math.exp(-x))/2};var cosh=function(x){return(Math.exp(x)+Math.exp(-x))/2};var tanh=function(x){return(Math.exp(x)-Math.exp(-x))/(Math.exp(x)+Math.exp(-x))};var sech=function(x){return 1/cosh(x)};var csch=function(x){return 1/sinh(x)};var coth=function(x){return 1/tanh(x)};var arcsinh=function(x){return ln(x+Math.sqrt(x*x+1))};var arccosh=function(x){return ln(x+Math.sqrt(x*x-1))};var arctanh=function(x){return ln((1+x)/(1-x))/2};var arcsech=function(x){return arccosh(1/x)};var arccsch=function(x){return arcsinh(1/x)};var arccoth=function(x){return arctanh(1/x)};var sign=function(x){return(x==0?0:(x<0?-1:1))};function factorial(x,n){if(n==null)n=1;for(var i=x-n;i>0;i-=n)x*=i;return(x<0?NaN:(x==0?1:x));}
function C(x,k){var res=1;for(var i=0;i<k;i++)res*=(x-i)/(k-i);return res;}
function chop(x,n){if(n==null)n=0;return Math.floor(x*Math.pow(10,n))/Math.pow(10,n);}
function ran(a,b,n){if(n==null)n=0;return chop((b+Math.pow(10,-n)-a)*Math.random()+a,n);}
function rk4(x,v,a,dt){var x1=x;var v1=v;var a1=a(x1,v1,0);var x2=x+0.5*v1*dt;var v2=v+0.5*a1*dt;var a2=a(x2,v2,dt/2);var x3=x+0.5*v2*dt;var v3=v+0.5*a2*dt;var a3=a(x3,v3,dt/2);var x4=x+v3*dt;var v4=v+a3*dt;var a4=a(x4,v4,dt);var xf=x+(dt/6)*(v1+2*v2+2*v3+v4);var vf=v+(dt/6)*(a1+2*a2+2*a3+a4);return[xf,vf];}
function pythag(p,q){return Math.sqrt(Math.pow(q[0]-p[0],2)+Math.pow(q[1]-p[1],2));}
function polarToCartesian(centerX,centerY,radius,angleInDegrees){var angleInRadians=(-angleInDegrees)*Math.PI/180.0;return{x:centerX+(radius*Math.cos(angleInRadians)),y:centerY+(radius*Math.sin(angleInRadians))};}
function contains(arr,obj){for(var i=0;i<arr.length;i++){if(arr[i][0]===obj[0]&&arr[i][1]===obj[1]){return true;}}
return false;}
function makeSVG(tag,attrs,eleId){var el=document.createElementNS('http://www.w3.org/2000/svg',tag);for(var k in attrs){if("undefined"!=typeof(attrs[k])){el.setAttribute(k,attrs[k]);}}
gebi(eleId).appendChild(el);return el;}
function use(id,svgID,attrs){var useElem=document.createElementNS('http://www.w3.org/2000/svg','use');useElem.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href',"#"+id);for(var k in attrs){if("undefined"!=typeof(attrs[k])){useElem.setAttribute(k,attrs[k]);}}
gebi(svgID).appendChild(useElem);}
function removeEle(ele){if(gebi(ele)){gebi(ele).parentNode.removeChild(gebi(ele));}else if(document.getElementsByClassName(ele)[0]){document.getElementsByClassName(ele)[0].parentNode.removeChild(document.getElementsByClassName(ele)[0]);}}
function setBoardParams(brdID){brdID=svgID.replace("SVG","");xmin=brdPropsArr[brdID]["xMin"];ymin=brdPropsArr[brdID]["yMin"];xmax=brdPropsArr[brdID]["xMax"];ymax=brdPropsArr[brdID]["yMax"];boardWidth=brdPropsArr[brdID]["brdWidth"];boardHeight=brdPropsArr[brdID]["brdHeight"];boardLeft=brdPropsArr[brdID]["Left"];boardTop=brdPropsArr[brdID]["Top"];xunitlength=brdPropsArr[brdID]["XuL"];yunitlength=brdPropsArr[brdID]["YuL"];origin[0]=brdPropsArr[brdID]["ox"];origin[1]=brdPropsArr[brdID]["oy"];padding=brdPropsArr[brdID]["pad"];actualXmin=brdPropsArr[brdID]["actualXmin"];actualXmax=brdPropsArr[brdID]["actualXmax"];actualYmin=brdPropsArr[brdID]["actualYmin"];actualYmax=brdPropsArr[brdID]["actualYmax"];}
function angleArc(p,radius,startAngle,endAngle,id){var node;if(id!=null)node=doc.getElementById(id);if(node==null){node=makeSVG("path",{"id":id,"stroke":stroke,"stroke-width":strokewidth,"stroke-opacity":strokeopacity,"fill":fill,"fill-opacity":fillopacity},svgID);}
var start=polarToCartesian(p[0]*xunitlength+origin[0],p[1]*yunitlength+(boardHeight-origin[1]),radius,startAngle);var end=polarToCartesian(p[0]*xunitlength+origin[0],p[1]*yunitlength+(boardHeight-origin[1]),radius,endAngle);var largeArcFlag=endAngle-startAngle<=180?"0":"1";var d="M"+(start.x).toFixed(2)+","+(start.y).toFixed(2)+" "+"A"+radius+","+radius+" 0 "+largeArcFlag+" 0 "+(end.x).toFixed(2)+","+(end.y).toFixed(2)+" L"+(end.x).toFixed(2)+","+(end.y).toFixed(2)+" "+p[0]*xunitlength+origin[0]+","+p[1]*yunitlength+(boardHeight-origin[1])+" Z";node.setAttribute("d",d);}
function arc(start,end,radius,id){var node,v;if(id!=null)node=doc.getElementById(id);if(radius==null){v=[end[0]-start[0],end[1]-start[1]];radius=Math.sqrt(v[0]*v[0]+v[1]*v[1]);}
if(node==null){node=makeSVG("path",{"id":id,"fill":fill,"fill-opacity":fillopacity,"stroke-width":strokewidth,"stroke":stroke,"stroke-opacity":0.5,},svgID);}
node.setAttribute("d","M"+(start[0]*xunitlength+origin[0])+","+
(boardHeight-start[1]*yunitlength-origin[1])+" A"+radius*xunitlength+","+
radius*yunitlength+" 0 0,0 "+(end[0]*xunitlength+origin[0])+","+
(boardHeight-end[1]*yunitlength-origin[1]));if(marker=="arrow"||marker=="arrowdot"){u=[(end[1]-start[1])/4,(start[0]-end[0])/4];v=[(end[0]-start[0])/2,(end[1]-start[1])/2];v=[start[0]+v[0]+u[0],start[1]+v[1]+u[1]];}else v=[start[0],start[1]];if(marker=="dot"||marker=="arrowdot"){ASdot(start,markersize,markerstroke,markerfill);if(marker=="arrowdot")arrowhead(v,end);ASdot(end,markersize,markerstroke,markerfill);}else if(marker=="arrow")arrowhead(v,end);}
function arrowhead(p,q,id){$p=p;$q=q;if(typeof(id)=="undefined")id="arrHead"+Math.floor(Math.random()*1000);$ox=origin[0];$oy=origin[1];if($q[0]==$p[0]){if($q[1]>$p[1]){$rotateAngleRad=0;}else{$rotateAngleRad=Math.PI;}}else{$rotateAngleRad=Math.PI/2-Math.atan((($q[1]-$p[1])*yunitlength)/(($q[0]-$p[0])*xunitlength));}
if($q[0]<$p[0]){$rotateAngleRad=Math.PI+$rotateAngleRad;}
$rotateAngleDeg=(180/Math.PI)*$rotateAngleRad;$triRotate=Math.round($rotateAngleDeg);if(typeof($triWidth)=="undefined"){$triWidth=7;}
if(typeof($triHeight)=="undefined"){$triHeight=12;}
$rot="rotate("+$triRotate+" "+Math.round($ox+$q[0]*xunitlength)+" "+Math.round(boardHeight-$oy-$q[1]*yunitlength)+")";$st='M '+Math.round($ox+$q[0]*xunitlength)+' '+Math.round(boardHeight-$oy-$q[1]*yunitlength)+' L '+Math.round($ox+$q[0]*xunitlength-$triWidth/2)+' '+Math.round(boardHeight-$oy+$triHeight-$q[1]*yunitlength)+' L '+Math.round($ox+$q[0]*xunitlength+$triWidth/2)+' '+Math.round(boardHeight-$oy+$triHeight-$q[1]*yunitlength)+' Z';var arrHead=makeSVG('path',{d:$st,transform:$rot,stroke:stroke,fill:arrowfill,id:id},svgID);}
function addListeners(brdSvgEle){brdSvgEle.addEventListener('pointerdown',doOnPointerDown,false);brdSvgEle.addEventListener('pointermove',doOnPointerMove,false);brdSvgEle.addEventListener('pointerup',doOnPointerUp,false);}
var transX,transY;var transXRem,transYRem;var xCart,yCart;var xPix,yPix;var cx,cy;function makeDraggable(targ,func,curveId){targID=targ.id;gebi(targID).style.strokeOpacity=0.01;addListeners(targ.parentNode);brdID=targ.parentNode.id.replace("SVG","");var xunitlength=brdPropsArr[brdID]["XuL"];var yunitlength=brdPropsArr[brdID]["YuL"];var boardWidth=brdPropsArr[brdID]["brdWidth"];var boardHeight=brdPropsArr[brdID]["brdHeight"];var padding=brdPropsArr[brdID]["pad"];var xmin=brdPropsArr[brdID]["xMin"];var xmax=brdPropsArr[brdID]["xMax"];var ymin=brdPropsArr[brdID]["yMin"];var ymax=brdPropsArr[brdID]["yMax"];var ox=brdPropsArr[brdID]["ox"]
var oy=brdPropsArr[brdID]["oy"];var cx=brdPropsArr[brdID][targID]["cx"];var cy=brdPropsArr[brdID][targID]["cy"];var r=brdPropsArr[brdID][targID]["r"];if(typeof(func)!="undefined"&&func!="vert"){var g;eval("g = function(x){ with(Math) return "+mathjs(func)+"; }");var qForGlider=g(brdPropsArr[brdID][targID]["cart"][0]);brdPropsArr[brdID][targID]["cart"][1]=qForGlider;targ.setAttribute("cy",(boardHeight-oy-qForGlider*yunitlength));}
var x_0=brdPropsArr[brdID][targID]["cart"][0];targID='';eventjs.add(targ,"drag",function(event,self){svgID=self.target.parentNode.id;brdID=svgID.replace("SVG","");targID=targ.id;var boardWidth=brdPropsArr[brdID]["brdWidth"];var boardHeight=brdPropsArr[brdID]["brdHeight"];gebi(svgID).appendChild(gebi(targID));if(typeof(brdPropsArr[brdID][targID]["trans"])=="undefined"){brdPropsArr[brdID][targID]["trans"]=[0,0];}
if(typeof(brdPropsArr[brdID][targID]["transRem"])=="undefined"){brdPropsArr[brdID][targID]["transRem"]=[0,0];}
transX=brdPropsArr[brdID][targID]["trans"][0]+self.x-r;transY=brdPropsArr[brdID][targID]["trans"][1]+self.y-r;xPix=brdPropsArr[brdID][targID]["cx"]+transX;yPix=cy+transY;if(xPix>boardWidth-padding){xPix=boardWidth-padding;xCart=xmax;transXRem=boardWidth-padding-cx;}else if(xPix<padding){xPix=padding;xCart=xmin;transXRem=-cx+padding;}else{transXRem=transX;xCart=xmin+(xPix-padding)/xunitlength;}
if(yPix<=padding){yPix=padding;transYRem=yPix-cy;}else if(yPix>boardHeight-padding){yPix=boardHeight-padding;transYRem=yPix-cy;}else{transYRem=transY;}
yCart=(boardHeight-yPix-oy)/yunitlength;if(typeof(func)=="undefined"){self.target.setAttribute("transform","translate("+(transXRem)+","+(transYRem)+")");}
brdPropsArr[brdID][targID]["cart"]=[xCart,yCart];brdPropsArr[brdID][targID]["pix"]=[xPix,yPix];if(typeof(brdPropsArr[brdID][targID]["segment"])!="undefined"){joinSegID=brdPropsArr[brdID][targID]["segment"];firstPt=brdPropsArr[brdID][joinSegID][0];secondPt=brdPropsArr[brdID][joinSegID][1];ptP=brdPropsArr[brdID][firstPt]["cart"];ptQ=brdPropsArr[brdID][secondPt]["cart"];segment(ptP,ptQ,joinSegID);}
if(typeof(brdPropsArr[brdID][targID]["line"])!="undefined"){joinLineID=brdPropsArr[brdID][targID]["line"];firstPt=brdPropsArr[brdID][joinLineID][0];secondPt=brdPropsArr[brdID][joinLineID][1]
ptP=brdPropsArr[brdID][firstPt]["cart"];ptQ=brdPropsArr[brdID][secondPt]["cart"];line(ptP,ptQ,joinLineID);}
if(typeof(func)!="undefined"&&func!="vert"){var slope=(g(xCart-0.01)-g(xCart))/-0.01;var screenSlope=slope*(brdPropsArr[brdID]["YuL"]/brdPropsArr[brdID]["XuL"])
if(Math.abs(screenSlope)<3){var yCart=Math.max(ymin,Math.min(g(xCart),ymax));var boardWidth=brdPropsArr[brdID]["brdWidth"];if(yPix<=r){transYRem=r-cy;}else if(yPix>=boardHeight-r){transYRem=yPix-cy;}else{transYRem=(-yCart+g(x_0))*yunitlength;}
if(xCart>brdPropsArr[brdID][curveId]["minX"]&&xCart<brdPropsArr[brdID][curveId]["maxX"]){gebi(targID).setAttribute("transform","translate("+(transXRem)+","+(transYRem)+")");}}else{newXcart=xCart-(g(xCart)-yCart)/slope;transXRem=0;transXRem=ox-cx+(newXcart)*xunitlength;gebi(targID).setAttribute("transform","translate("+(transXRem)+","+(transYRem)+")");brdPropsArr[brdID][targID]["cart"]=[newXcart,yCart];brdPropsArr[brdID][targID]["pix"]=[xPix,yPix];xCart=newXcart;}
if(gebi("eventsInfo1")){if(dragCnt%5==1){gebi("eventsInfo1").innerHTML="<b>Cartesian:</b> ("+(xCart.toFixed(2))+", "+yCart.toFixed(2)+")";}}}
if(typeof(brdPropsArr[brdID][curveId])!="undefined"&&typeof(brdPropsArr[brdID][curveId]["vert"])!="undefined"&&brdPropsArr[brdID][curveId]["vert"][0][0]==brdPropsArr[brdID][curveId]["vert"][1][0]){xCart=brdPropsArr[brdID][curveId]["vert"][0][0];transXRem=0;gebi(targID).setAttribute("transform","translate("+(transXRem)+","+(transYRem)+")");brdPropsArr[brdID][targID]["cart"]=[xCart,yCart];brdPropsArr[brdID][targID]["pix"]=[xPix,yPix];if(gebi("eventsInfo1")){if(dragCnt%5==1){gebi("eventsInfo1").innerHTML="<b>Cartesian:</b> ("+(xCart.toFixed(2))+", "+yCart.toFixed(2)+")";}}}
brdPropsArr[brdID][targID]["transRem"]=[transXRem,transYRem];if(gebi("eventsInfo0")){if(dragCnt%5==0){gebi("eventsInfo0").innerHTML="<b>Board:</b> "+brdID+", <b>target:</b> "+targID;}}
if(typeof(func)=="undefined"){yCart=(boardHeight-yPix-oy)/yunitlength;if(gebi("eventsInfo1")){if(dragCnt%5==1){gebi("eventsInfo1").innerHTML="<b>Cartesian:</b> ("+(xCart.toFixed(2))+", "+yCart.toFixed(2)+")";}}}
if(gebi("eventsInfo2")&&dragCnt%5==2){gebi("eventsInfo2").innerHTML="<b>Pixels:</b> ("+(xPix.toFixed(1))+", "+yPix.toFixed(1)+")";}
if(gebi("eventsInfo3")&&dragCnt%5==3){gebi("eventsInfo3").innerHTML="<b>self.x, self.y:</b> ("+(self.x.toFixed(2))+","+(self.y.toFixed(2))+")";}
if(gebi("eventsInfo4")&&dragCnt%5==4){gebi("eventsInfo4").innerHTML="<b>translateRem:</b> "+brdPropsArr[brdID][targID]["trans"][0].toFixed(2)+", "+brdPropsArr[brdID][targID]["trans"][1].toFixed(2);}
dragCnt++;});}
var eTarg,targetId,et,mseTchPosi;var drag=null,dragging=false;var currCartMatrix=[];var slicedSVG;var resetCxCy=false;var isTouch=false;var etTxt=document.getElementById("etTxt");var tchX,tchY,tchPos;function Drag(evt){eTarg=evt.target,targetId=eTarg.id,et=evt.type,mseTchPosi=mseTchPos(evt);var svgID=evt.target.parentNode.id;slicedSVG=svgID.slice(0,-3);if(typeof(currCartMatrix[slicedSVG][targetId])=="undefined"){currCartMatrix[slicedSVG][targetId]=[];}
if(etTxt){etTxt.innerHTML=et;}
if((!drag||!dragging)&&(et=="mousedown"||et=="touchstart")){thisSVGNode=document.getElementById(svgID);thisSVGNode.appendChild(eTarg);if('function'===typeof window.doFirstOnElementSelect){doFirstOnElementSelect();}
if(eTarg.className.baseVal=="draggable"){drag=eTarg;if(typeof(drag._x)=="undefined"&&!resetCxCy){drag._x=0;drag._y=0;}
dPoint=mseTchPosi;if(resetCxCy){if(typeof(currCartMatrix[slicedSVG][targetId]['currCx'])=="undefined"||typeof(currCartMatrix[slicedSVG][targetId]['currCy'])=="undefined"||typeof(currCartMatrix[slicedSVG][targetId]['transX'])=="undefined"||typeof(currCartMatrix[slicedSVG][targetId]['transY'])=="undefined"||eTarg.getAttribute("transform")==null){currCartMatrix[slicedSVG][targetId]['currCx']=Number(eTarg.getAttribute("cx"));currCartMatrix[slicedSVG][targetId]['currCy']=Number(eTarg.getAttribute("cy"));}else{currCartMatrix[slicedSVG][targetId]['currCx']=Number(eTarg.getAttribute("cx"))+Number(currCartMatrix[slicedSVG][targetId]['transX']);currCartMatrix[slicedSVG][targetId]['currCy']=Number(eTarg.getAttribute("cy"))+Number(currCartMatrix[slicedSVG][targetId]['transY']);eTarg.removeAttribute("transform");eTarg.setAttribute("cx",currCartMatrix[slicedSVG][targetId]['currCx']);var glideOn=eTarg.getAttribute('data-gliderOn');if(glideOn){eTarg.setAttribute("cy",boardPropsArr[slicedSVG+"Height"]-boardPropsArr[slicedSVG+"oy"]+Number(glideOn)*boardPropsArr[slicedSVG+"YuL"]);}else{eTarg.setAttribute("cy",currCartMatrix[slicedSVG][targetId]['currCy']);}}
drag._x=0;drag._y=0;}else{dPoint={x:mseTchPosi.x-drag.getCTM().e,y:mseTchPosi.y-drag.getCTM().f};currCartMatrix[slicedSVG][targetId]['currCx']=Number(eTarg.getAttribute("cx"));currCartMatrix[slicedSVG][targetId]['currCy']=Number(eTarg.getAttribute("cy"));drag._x=0;drag._y=0;}}
if('function'===typeof window.doAfterElementSelect){doAfterElementSelect();}}
if(drag&&(et=="mousemove"||et=="touchmove")){if(mseTchPosi.x>4&&mseTchPosi.x<boardPropsArr[slicedSVG+"Width"]-4&&mseTchPosi.y>4&&mseTchPosi.y<boardPropsArr[slicedSVG+"Height"]-4){drag._x+=mseTchPosi.x-dPoint.x;var glideOn=eTarg.getAttribute('data-gliderOn');if(glideOn){drag._y=Number(glideOn);}else{drag._y+=mseTchPosi.y-dPoint.y;}
if(Math.abs(drag._x)>0||Math.abs(drag._y)>0){dragging=true;dPoint=mseTchPosi;drag.setAttribute("transform","translate("+drag._x+","+drag._y+")");currCartMatrix[slicedSVG][targetId]['transX']=drag._x;currCartMatrix[slicedSVG][targetId]['transY']=drag._y;if(targetId.length>0&&targetId.indexOf("board")==-1){xCart=(mseTchPosi.x-padding)/boardPropsArr[slicedSVG+"XuL"]+boardPropsArr[slicedSVG+"xMin"];yCart=(boardPropsArr[slicedSVG+"Height"]-mseTchPosi.y-boardPropsArr[slicedSVG+"oy"])/boardPropsArr[slicedSVG+"YuL"];currCartMatrix[slicedSVG][targetId]['xCart']=xCart;currCartMatrix[slicedSVG][targetId]['yCart']=yCart;if('function'===typeof window.doOnElementDrag){doOnElementDrag();}}}}else{drag=null;}}
if(drag&&(et=="mouseup")){drag="undefined";dragging=false;if('function'===typeof window.doOnDeselectElement){doOnDeselectElement();}}
if(drag&&(et=="mouseout")){drag=null;dragging=false;if('function'===typeof window.doOnMouseOut){doOnMouseOut();}}}
function mseTchPos(evt){var svgID=evt.target.parentNode.id;slicedSVG=svgID.slice(0,-3);var p=document.getElementById(svgID).createSVGPoint();if(isTouch||typeof(evt.touches)!="undefined"){p.x=evt.touches[0].clientX;p.y=evt.touches[0].clientY;}else{p.x=evt.clientX;p.y=evt.clientY;}
var matrix=document.getElementById(svgID).getScreenCTM();p=p.matrixTransform(matrix.inverse());return{x:p.x,y:p.y}}
joinSegArr=[];joinLineArr=[];function ASdot(center,radius,s,f,id){setBoardParams(brdID);slicedSVG=svgID.slice(0,-3);brdPropsArr[slicedSVG][id]=[];brdPropsArr[slicedSVG][id]["cart"]=center;var node;if(s==null)s=stroke;if(f==null)f=fill;if(id!=null)node=doc.getElementById(id);if(node==null){cx=(center[0]*xunitlength+origin[0]);cy=(boardHeight-center[1]*yunitlength-origin[1]);node=makeSVG("circle",{"id":id,"cx":cx.toFixed(2),"cy":cy.toFixed(2),"r":radius,"stroke":s,"stroke-width":strokewidth,"stroke-opacity":strokeopacity,"fill":f,"fill-opacity":fillopacity},svgID);brdPropsArr[slicedSVG][id]["cx"]=cx;brdPropsArr[slicedSVG][id]["cy"]=cy;brdPropsArr[slicedSVG][id]["r"]=radius;}
if(dotDraggable){slicedSVG=svgID.slice(0,-3);node.setAttribute("class","draggable");if(gliderOn.length>0){node.setAttribute("data-gliderOn",gliderOn);}
thisXunitLen=boardPropsArr[slicedSVG+"XuL"];thisYunitLen=boardPropsArr[slicedSVG+"YuL"];thisPadding=boardPropsArr[slicedSVG+"pad"];thisXmin=boardPropsArr[slicedSVG+"xMin"];thisOy=boardPropsArr[slicedSVG+"oy"];thisHeight=boardPropsArr[slicedSVG+"Height"];var xCart=center[0];var yCart=center[1];if(typeof(currCartMatrix[slicedSVG])=="undefined"){currCartMatrix[slicedSVG]=[];}
if(typeof(currCartMatrix[slicedSVG][node.id])=="undefined"){currCartMatrix[slicedSVG][node.id]=[];}
currCartMatrix[slicedSVG][node.id]['xCart']=xCart;currCartMatrix[slicedSVG][node.id]['yCart']=yCart;node.onmousedown=Drag;node.onmousemove=Drag;node.onmouseup=Drag;node.onmouseout=Drag;node.addEventListener("touchstart",function(evt){if(evt.preventDefault)evt.preventDefault();isTouch=true;Drag(evt);},false);node.addEventListener("touchmove",function(evt){if(evt.preventDefault)evt.preventDefault();Drag(evt);},false);node.addEventListener("touchend",function(evt){if(evt.preventDefault)evt.preventDefault();drag=null;if('function'===typeof window.doOnDeselectElement){doOnDeselectElement();}},false);}
return gebi(id);}
function circle(center,radius,id){ellipse(center,radius,radius,id);}
function dot(center,typ,label,pos,id){var node;var cx=center[0]*xunitlength+brdPropsArr[brdID]["ox"];var cy=brdPropsArr[brdID]["brdHeight"]-center[1]*brdPropsArr[brdID]["YuL"]-brdPropsArr[brdID]["oy"];if(id!=null)node=doc.getElementById(id);if(typ=="+"||typ=="-"||typ=="|"){if(node==null){node=makeSVG("path",{id:id},svgID);}
if(typ=="+"){node.setAttribute("d"," M "+(cx-ticklength)+" "+cy+" L "+(cx+ticklength)+" "+cy+" M "+cx+" "+(cy-ticklength)+" L "+cx+" "+(cy+ticklength));node.setAttribute("stroke-width",1);node.setAttribute("stroke",axesstroke)}else{if(typ=="-")node.setAttribute("d"," M "+(cx-ticklength)+" "+cy+" L "+(cx+ticklength)+" "+cy);else node.setAttribute("d"," M "+cx+" "+(cy-ticklength)+" L "+cx+" "+(cy+ticklength));node.setAttribute("stroke-width",strokewidth);node.setAttribute("stroke",stroke)}}else{if(node==null){node=makeSVG("circle",{id:id},svgID);}
node.setAttribute("cx",cx);node.setAttribute("cy",cy);node.setAttribute("r",dotradius);node.setAttribute("stroke-width",strokewidth);node.setAttribute("stroke",stroke);node.setAttribute("stroke-opacity",strokeopacity);node.setAttribute("fill",(typ=="open"?"white":stroke))
node.setAttribute("fill-opacity",fillopacity);}
if(label!=null&&label.length>0)text(center,label,(pos==null?"below":pos),(id==null?id:id+"label"))
if(typeof(brdPropsArr[brdID][id])=="undefined"){brdPropsArr[brdID][id]=[];brdPropsArr[brdID][id]["cart"]=[];}
brdPropsArr[brdID][id]["cart"]=center;}
function ellipse(center,rx,ry,id){var node;if(id!=null)node=doc.getElementById(id);if(node==null){node=makeSVG("ellipse",{"id":id,"cx":(center[0]*brdPropsArr[brdID]["XuL"]+brdPropsArr[brdID]["ox"]).toFixed(2),"cy":(brdPropsArr[brdID]["brdHeight"]-center[1]*brdPropsArr[brdID]["YuL"]-brdPropsArr[brdID]["oy"]).toFixed(2),"rx":rx*brdPropsArr[brdID]["XuL"],"ry":ry*brdPropsArr[brdID]["YuL"],"stroke":stroke,"stroke-width":strokewidth,"stroke-opacity":strokeopacity,"fill":fill,"fill-opacity":fillopacity},svgID);}}
function draggablePtsSegLineJoiner(lineSeg,lineSegType,ptsArray,ptNamesArr){brdPropsArr[brdID][lineSeg]=ptNamesArr;strokewidth=segstrokewidth;if(lineSegType=="segment"){segment(ptsArray[0],ptsArray[1],lineSeg);}else{line(ptsArray[0],ptsArray[1],lineSeg);}
gebi(svgID).appendChild(gebi(lineSeg));strokewidth=dotstrokewidth;ASdot(ptsArray[0],dotradius,stroke,fill,ptNamesArr[0]);ASdot(ptsArray[1],dotradius,stroke,fill,ptNamesArr[1]);brdPropsArr[brdID][ptNamesArr[0]][lineSegType]=lineSeg;brdPropsArr[brdID][ptNamesArr[1]][lineSegType]=lineSeg;gebi(ptNamesArr[0]).setAttribute("join-"+lineSegType,lineSeg);gebi(ptNamesArr[1]).setAttribute("join-"+lineSegType,lineSeg);makeDraggable(gebi(ptNamesArr[0]));makeDraggable(gebi(ptNamesArr[1]));}
function line(p,q,id,strokedasharray){setBoardParams(svgID);var node;if(id){node=doc.getElementById(id);}else{elementIdNum++;id=svgID+"-line-"+elementIdNum;}
if(node==null){node=makeSVG("path",{"id":id,"stroke":stroke,"stroke-width":strokewidth,"stroke-opacity":strokeopacity,"fill":fill,"fill-opacity":fillopacity,"vector-effect":"non-scaling-stroke"},svgID);}
if(strokedasharray!=null)node.setAttribute("stroke-dasharray",strokedasharray);if(shaperendering!=null)node.setAttribute("shape-rendering",shaperendering);var xmin=brdPropsArr[brdID]["xMin"];var xmax=brdPropsArr[brdID]["xMax"];var actualXmin=brdPropsArr[brdID]["actualXmin"];var actualXmax=brdPropsArr[brdID]["actualXmax"];var ymin=brdPropsArr[brdID]["yMin"];var ymax=brdPropsArr[brdID]["yMax"];var actualYmin=brdPropsArr[brdID]["actualYmin"];var actualYmax=brdPropsArr[brdID]["actualYmax"];if(p[0]==q[0]){if(goToExtremities){pStart=[p[0],actualYmin];pEnd=[p[0],actualYmax];}else{pStart=[p[0],ymin];pEnd=[p[0],ymax];}
p=pStart;q=pEnd;if(typeof(brdPropsArr[brdID][id])=="undefined"){brdPropsArr[brdID][id]=[];brdPropsArr[brdID][id]["vert"]=[p,q];}}else if(p[1]==q[1]){if(goToExtremities){pStart=[actualXmin,p[1]];pEnd=[actualXmax,q[1]];}else{pStart=[xmin,p[1]];pEnd=[xmax,q[1]];}}else{var slope=(q[1]-p[1])/(q[0]-p[0]);if(goToExtremities){yValueAtActualXmin=slope*(actualXmin-p[0])+p[1];if(yValueAtActualXmin>actualYmin&&yValueAtActualXmin<actualYmax){var xStart=actualXmin;pStart=[xStart,yValueAtActualXmin];}else{var xStart=(actualYmin-p[1])/slope+p[0];pStart=[xStart,actualYmin];}
yValueAtActualXmax=slope*(actualXmax-q[0])+q[1];if(yValueAtActualXmax>actualYmin&&yValueAtActualXmax<actualYmax){var xEnd=actualXmax;pEnd=[xEnd,yValueAtActualXmax];}else{var xEnd=(actualYmax-q[1])/slope+q[0];pEnd=[xEnd,actualYmax];}}else{yValueAtXmin=slope*(xmin-p[0])+p[1];if(yValueAtXmin>ymin&&yValueAtXmin<ymax){var xStart=xmin;pStart=[xStart,yValueAtXmin];}else{if(slope>0){var xStart=(ymin-p[1])/slope+p[0];pStart=[xStart,ymin];}else{var xStart=(ymax-p[1])/slope+p[0];pStart=[xStart,ymax];}}
yValueAtXmax=slope*(xmax-q[0])+q[1];if(yValueAtXmax>ymin&&yValueAtXmax<ymax){var xEnd=xmax;pEnd=[xEnd,yValueAtXmax];}else{if(slope>0){var xEnd=(ymax-q[1])/slope+q[0];pEnd=[xEnd,ymax];}else{var xEnd=(ymin-q[1])/slope+q[0];pEnd=[xEnd,ymin];}}}
p=pStart;q=pEnd;}
node.setAttribute("d","M"+(p[0]*xunitlength+origin[0])+","+(boardHeight-p[1]*yunitlength-origin[1])+" "+(q[0]*xunitlength+origin[0])+","+(boardHeight-q[1]*yunitlength-origin[1]));return node;}
function segment(p,q,id,strokedasharray){setBoardParams(svgID);if((p[0]>actualXmin&&p[0]<actualXmax&&p[1]>actualYmin&&p[1]<actualYmax)||(q[0]>actualXmin&&q[0]<actualXmax&&q[1]>actualYmin&&q[1]<actualYmax)||((p[0]+q[0])/2>actualXmin&&(p[0]+q[0])/2<actualXmax||(p[1]+q[1])/2>actualYmin&&(p[1]+q[1])/2<actualYmax)){var node;if(id){node=doc.getElementById(id);}else{elementIdNum++;id=svgID+"-seg-"+elementIdNum;}
if(node==null){node=makeSVG("path",{"id":id,"stroke":stroke,"stroke-width":strokewidth,"stroke-opacity":strokeopacity,"fill":fill,"fill-opacity":fillopacity,"stroke-dasharray":strokedasharray,"vector-effect":"non-scaling-stroke"},svgID);}
if(strokedasharray!=null)node.setAttribute("stroke-dasharray",strokedasharray);if(shaperendering!=null)node.setAttribute("shape-rendering",shaperendering);slopeAng=arctan((q[1]-p[1])/(q[0]-p[0]));if(marker=="dotdot"||marker=="dotarrow"||marker=="dot"||marker=="arrowdot"){if(typeof(firstDotClosed)!="undefined"&&firstDotClosed==1){mrkrfill=corpColor;fillopacity=1;}else{mrkrfill="none";fillopacity=0;}
if(marker=="dotdot"||marker=="dotarrow"||marker=="dot"){ASdot(p,markersize,markerstroke,mrkrfill);}
fillopacity=1;dotSpacerX=markersize*cos(slopeAng);dotSpacerY=markersize*sin(slopeAng);if(marker=="dotdot"||marker=="arrowdot"){ASdot(q,markersize,markerstroke,markerfill);}
if(marker=="dotarrow"||marker=="arrowdot"){if(marker=="dotarrow"){arrowhead(p,q);}else{dotSpacerX+=4*Math.cos(slopeAng);dotSpacerY+=4*Math.sin(slopeAng);if(p[0]>q[0]){dotSpacerX=-dotSpacerX;dotSpacerY=-dotSpacerY;}
arrowhead(p,[q[0]-(dotSpacerX)/xunitlength,q[1]-(dotSpacerY)/yunitlength]);}}}else if(marker=="arrow"){arrowhead(p,q,id+"-ah");dotSpacerX=0;dotSpacerY=0;}else{dotSpacerX=dotSpacerY=0;}
node.setAttribute("d","M"+(p[0]*xunitlength+origin[0]+dotSpacerX)+","+(boardHeight-p[1]*yunitlength-origin[1]-dotSpacerY)+" "+(q[0]*xunitlength+origin[0]-dotSpacerX)+","+(boardHeight-q[1]*yunitlength-origin[1]+dotSpacerY));return node;}}
function pathGivenD(d,id){if(id!=null){node=doc.getElementById(id);}else{elementIdNum++;id=svgID+"-pathgd-"+elementIdNum;}
node=makeSVG("path",{"id":id,"stroke":stroke,"stroke-width":strokewidth,"stroke-opacity":strokeopacity,"fill":fill,"fill-opacity":fillopacity,"vector-effect":"non-scaling-stroke"},svgID);node.setAttribute("d",d);}
function path(plist,id,c){setBoardParams(svgID);if(c==null)c="";var node,st,i;if(id!=null){node=doc.getElementById(id);}else{elementIdNum++;id=svgID+"-path-"+elementIdNum;}
if(node==null){node=makeSVG("path",{"id":id,"stroke":stroke,"stroke-width":strokewidth,"stroke-opacity":strokeopacity,"fill":fill,"fill-opacity":fillopacity,"vector-effect":"non-scaling-stroke"},svgID);}
if(typeof plist=="string")st=plist;else{st="M";curveLengthCart=0;curveLengthPix=0;for(i=0;i<plist.length;i++){if(plist[i][1]>brdPropsArr[brdID]["plotYmin"]&&plist[i][1]<brdPropsArr[brdID]["plotYmax"]){st+=(plist[i][0]*xunitlength+origin[0]).toFixed(2)+","+
(boardHeight-plist[i][1]*yunitlength-origin[1]).toFixed(2)+" ";if(i>1){curveLengthCart+=pythag([plist[i-1][0],plist[i-1][1]],[plist[i][0],plist[i][1]]);curveLengthPix+=pythag([plist[i-1][0]*xunitlength+origin[0],boardHeight-plist[i-1][1]*yunitlength-origin[1]],[plist[i][0]*xunitlength+origin[0],boardHeight-plist[i][1]*yunitlength-origin[1]])}}}
if(typeof(brdPropsArr[brdID][id])=="undefined"){brdPropsArr[brdID][id]=[];}
brdPropsArr[brdID][id]["curveLenCart"]=curveLengthCart;brdPropsArr[brdID][id]["curveLenPix"]=curveLengthPix;}
node.setAttribute("d",st);node.setAttribute("stroke-width",strokewidth);if(typeof(opacity)!="undefined"){node.setAttribute("opacity",opacity);}
node.setAttribute("vector-effect","non-scaling-stroke");if(strokedasharray!=null)
node.setAttribute("stroke-dasharray",strokedasharray);if(strokedashoffset!=null)
node.setAttribute("stroke-dashoffset",strokedashoffset);if(marker=="dot"||marker=="arrowdot")
for(i=0;i<plist.length;i++)
if(c!="C"&&c!="T"||i!=1&&i!=2)
ASdot(plist[i],markersize,markerstroke,markerfill);}
var x;function plot(fun,x_min,x_max,points,id){pth=[];f=function(x){return x};g=fun;var name=null;if(id!=null){removeEle(id);removeEle(id+"-0");removeEle(id+"-1");}else{elementIdNum++;id=svgID+"-plot-"+elementIdNum;}
var idInc=0;var graphFn=[];var q=[];brdID=boundingDiv.id;var xDomain=brdPropsArr[brdID]["xMax"]-brdPropsArr[brdID]["xMin"];var actualXmin=brdPropsArr[brdID]["actualXmin"];var actualXmax=brdPropsArr[brdID]["actualXmax"];var actualYmin=brdPropsArr[brdID]["actualYmin"];var actualYmax=brdPropsArr[brdID]["actualYmax"];var plotYmin=brdPropsArr[brdID]["plotYmin"];var plotYmax=brdPropsArr[brdID]["plotYmax"];var pushBeforeYmin=true;if(typeof fun=="string"&&fun.indexOf("y")>-1){if(typeof fun=="string"){eval("g = function(y){ with(Math) return "+mathjs(fun)+"; }");}else if(typeof fun=="object"){eval("f = function(t){ with(Math) return "+mathjs(fun[0])+" }");eval("g = function(t){ with(Math) return "+mathjs(fun[1])+" }");}
if(typeof x_min=="string"){name=x_min;x_min=xmin}
else name=id;var min=(x_min==null?xmin:x_min);var max=(x_max==null?xmax:x_max);var inc=max-min-0.000001*(max-min);inc=(points==null?inc/200:inc/points);var gt;for(var t=min;t<=max;t+=inc){gt=g(t);pth.push([gt,f(t)]);}}else{if(typeof fun=="string"){eval("g = function(x){ with(Math) return "+mathjs(fun)+"; }");}else if(typeof fun=="number"){eval("g = function(x){ return "+fun+"; }");}else if(typeof fun=="object"){eval("f = function(t){ with(Math) return "+mathjs(fun[0])+"; }");eval("g = function(t){ with(Math) return "+mathjs(fun[1])+"; }");}
if(plotBeyondXVis){xPlotMin=x_min;xPlotMax=x_max;}else{xPlotMin=Math.max(actualXmin,x_min);xPlotMax=Math.min(actualXmax,x_max);}
var min=1*(x_min==null?xmin:xPlotMin);var max=1*(x_max==null?xmax:xPlotMax);var gt,gtRem=g(min),slopRem=0,plotIt=false,plotted=false,changeSigns=false;var xDomain=max-min;var slop=0;var dom=0.999999*xDomain;var inc=(points==null?dom/250:dom/points);gtPrevPix=boardHeight-(origin[1]+g(min-inc)*yunitlength);gtPix=boardHeight-(origin[1]+g(min)*yunitlength);gtNextPix=boardHeight-(origin[1]+g(min+inc)*yunitlength);var slopNextPix=(gtPix-gtNextPix)/inc;slopPixRem=(gtPix-gtPrevPix)/inc;pushFlag=false;slopSwingFlag=false;if(typeof(brdPropsArr[brdID][id])=="undefined"){brdPropsArr[brdID][id]=[];}
brdPropsArr[brdID][id]["minX"]=1000000000;brdPropsArr[brdID][id]["maxX"]=-1000000000;brdPropsArr[brdID][id]["minY"]=1000000000;brdPropsArr[brdID][id]["maxY"]=-1000000000;if(!plotBeyondYVis){actualYmax=ymax;actualYmin=ymin;}
colorsArr=["#f08","#0f8","#8f0","#f80","#08f","#80f","#338","#f8f","#f00","#0f0","#f0f","#5f5","#f08","#0f8","#8f0","#f80","#08f","#80f","#338","#f8f","#f00","#0f0","#f0f","#5f5","#f08","#0f8","#8f0","#f80","#08f","#80f","#338","#f8f","#f00","#0f0","#f0f","#5f5"];var incRem=inc;var incSub=20;var inc=inc/incSub;var sub=0;for(t=min;t<max;t+=inc){if(t!==0&&sign(t)==-1&&sign(t+inc)==1){if(sign(t)==-1){t=-0.000000000001;}}
if(t!==0&&sign(t-inc)==-1&&sign(t)==1){if(sign(t)==1){t=0.0000000001;}}
gtPrev=g(t-inc);gt=g(t);gtNext=g(t+inc);gtNextNext=g(t+2*inc);slopCart=(gtRem-gt)/inc;gtPrevPix=boardHeight-(origin[1]+gtPrev*yunitlength);gtPix=boardHeight-(origin[1]+gt*yunitlength);gtNextPix=boardHeight-(origin[1]+gtNext*yunitlength);slopPrevPix=(gtPrevPix-gtPix)/inc;slopNextPix=(gtPix-gtNextPix)/inc;gtIsNum=(!isNaN(gt)&&Math.abs(gt)!="Infinity")?true:false;gtisLessPlotYmin=(gt<plotYmin)?true:false;gtBetweenMins=(gt>plotYmin&&gt<actualYmin)?true:false;aveMins=0.5*(plotYmin+actualYmin);gtPrevVis=(gtPrev>actualYmin&&gtPrev<actualYmax)?true:false;gtVis=(gt>actualYmin&&gt<actualYmax)?true:false;gtNextVis=(gtNext>actualYmin&&gtNext<actualYmax)?true:false;gtBetweenMaxs=(gt>actualYmax&&gt<plotYmax)?true:false;gtisMorePlotYmax=(gt>plotYmax)?true:false;aveMaxs=0.5*(actualYmax+plotYmax);slopSwingFlag=false;if(Math.abs(slopPrevPix)>500&&Math.abs(slopNextPix)>500&&sign(slopPrevPix)!=sign(slopNextPix)){slopSwingFlag=true;}
if(gt=="-Infinity"){pth.push([t,plotYmin+0.00001]);}
if(gt=="Infinity"){pth.push([t,plotYmax-0.00001]);}
if(gt>plotYmin&&gt<plotYmax){if(sub%incSub==0||(slopPrevPix<-400&&gt>plotYmin)||(slopPrevPix>400&&gt<plotYmax)){pth.push([t,gt]);}
sub++;}else{if(pth.length>2){if(typeof(id)=="string"){path(pth,id);id=null;}else{path(pth);}
pth=[];plotted=true;pushBeforeYmin=true;idInc++;sub=0;}}}}
if(pth.length>1){path(pth,id);pth=[];}else if(plotted===false){console.log("There are no points to plot. Are your xMin, xMax and yMin, yMax positioned correctly?");}}
function polygon(ptsArr,id){var node;if(id!=null){node=doc.getElementById(id);}else{elementIdNum++;id=svgID+"-rect-"+elementIdNum;}
if(node==null){node=makeSVG("polygon",{id:id},svgID);}
var ptsTxt='';for(var i=0;i<ptsArr.length;i++){ptsTxt+=(ptsArr[i][0]*xunitlength+origin[0]).toFixed(2)+","+(boardHeight-ptsArr[i][1]*yunitlength-origin[1]).toFixed(2)+" ";}
node.setAttribute("points",ptsTxt);node.setAttribute("stroke-width",strokewidth);node.setAttribute("stroke-opacity",strokeopacity);node.setAttribute("stroke",stroke);node.setAttribute("fill",fill);node.setAttribute("fill-opacity",fillopacity);}
function rect(p,q,id,rx,ry){var node;if(id!=null){node=doc.getElementById(id);}else{elementIdNum++;id=svgID+"-rect-"+elementIdNum;}
if(node==null){node=makeSVG("rect",{id:id},svgID);}
node.setAttribute("x",(p[0]*xunitlength+origin[0]).toFixed(2));node.setAttribute("y",(boardHeight-q[1]*yunitlength-origin[1]).toFixed(2));node.setAttribute("width",((q[0]-p[0])*xunitlength).toFixed(2));node.setAttribute("height",((q[1]-p[1])*yunitlength).toFixed(2));if(rx!=null)node.setAttribute("rx",(rx*xunitlength).toFixed(2));if(ry!=null)node.setAttribute("ry",(ry*yunitlength).toFixed(2));node.setAttribute("stroke-width",strokewidth);node.setAttribute("stroke",stroke);node.setAttribute("fill",fill);node.setAttribute("fill-opacity",fillopacity);}
function strip_tags(html){var tmp=document.createElement("DIV");tmp.innerHTML=html;return tmp.textContent||tmp.innerText;}
function text(p,str,pos,id,fontsty,fontfam){xunitlength=brdPropsArr[brdID]["XuL"];yunitlength=brdPropsArr[brdID]["YuL"];if(typeof(fontsty)=="undefined"){fontsty='';}
var textanchor="middle";var dx=0;var dy=fontsize/3;if(pos!=null){if(pos.slice(0,5)=="above")dy=-fontsize/2;if(pos.slice(0,5)=="below")dy=fontsize+4;if(pos.slice(0,5)=="right"||pos.slice(5,10)=="right"){textanchor="start";dx=fontsize/2;}
if(pos.slice(0,4)=="left"||pos.slice(5,9)=="left"){textanchor="end";dx=-fontsize/2;}}
strTxt=strip_tags(str);if(isNaN(str)&&str.length!=strTxt.length){newDiv=document.createElement('div');newDiv.id=id;newDiv.className="svgHtml intmath";newDiv.setAttribute("style","position:absolute;top:"+Math.round(boardHeight-p[1]*yunitlength-origin[1]-padding+dy)+"px;left:"+Math.round(p[0]*xunitlength+origin[0]+dx-5)+"px;"+fontsty);if(str=="&nbsp;"){str='';}
newDiv.innerHTML=str;boundingDiv=gebi(brdID);boundingDiv.appendChild(newDiv);}else{var node;if(id!=null){node=document.getElementById(id);}else{elementIdNum++;id=svgID+"-text-"+elementIdNum;}
if(node==null){node=makeSVG("text",{id:id},svgID);}
node.textContent=strTxt;node.setAttribute("x",(p[0]*xunitlength+origin[0]+dx).toFixed(2));node.setAttribute("y",(boardHeight-p[1]*yunitlength-origin[1]+dy).toFixed(2));if(fontsty!=null){node.setAttribute("style",((fontsty!=null&&typeof(fontsty)!="undefined")?fontsty:fontstyle));}
node.setAttribute("class",txtLabelsClass);if(id.indexOf("AxVbl")>-1){fs=16;}else{fs=fontsize;}
node.setAttribute("style","font-size:"+fs+"px");node.setAttribute("font-weight",fontweight);node.setAttribute("text-anchor",textanchor);if(fontstroke!="none")node.setAttribute("stroke",fontstroke);if(fontfill!="none")node.setAttribute("fill",fontfill);}
return p;}
function chopZ(st){var k=st.indexOf(".");if(k==-1)return st;for(var i=st.length-1;i>k&&st.charAt(i)=="0";i--);if(i==k)i--;return st.slice(0,i+1);}
function mathjs(st){st=st.replace(/\s/g,"");if(st.indexOf("log")!=-1){st=st.replace(/log/g,"logten");}
if(st.indexOf("^-1")!=-1){st=st.replace(/sin\^-1/g,"arcsin");st=st.replace(/cos\^-1/g,"arccos");st=st.replace(/tan\^-1/g,"arctan");st=st.replace(/sec\^-1/g,"arcsec");st=st.replace(/csc\^-1/g,"arccsc");st=st.replace(/cot\^-1/g,"arccot");st=st.replace(/sinh\^-1/g,"arcsinh");st=st.replace(/cosh\^-1/g,"arccosh");st=st.replace(/tanh\^-1/g,"arctanh");st=st.replace(/sech\^-1/g,"arcsech");st=st.replace(/csch\^-1/g,"arccsch");st=st.replace(/coth\^-1/g,"arccoth");}
st=st.replace(/^e$/g,"(E)");st=st.replace(/^e([^a-zA-Z])/g,"(E)$1");st=st.replace(/([^a-zA-Z])e([^a-zA-Z])/g,"$1(E)$2");st=st.replace(/([0-9])([\(a-zA-Z])/g,"$1*$2");st=st.replace(/\)([\(0-9a-zA-Z])/g,"\)*$1");var i,j,k,ch,nested;while((i=st.indexOf("^"))!=-1){if(i==0)return"Error: missing argument";j=i-1;ch=st.charAt(j);if(ch>="0"&&ch<="9"){j--;while(j>=0&&(ch=st.charAt(j))>="0"&&ch<="9")j--;if(ch=="."){j--;while(j>=0&&(ch=st.charAt(j))>="0"&&ch<="9")j--;}}else if(ch==")"){nested=1;j--;while(j>=0&&nested>0){ch=st.charAt(j);if(ch=="(")nested--;else if(ch==")")nested++;j--;}
while(j>=0&&(ch=st.charAt(j))>="a"&&ch<="z"||ch>="A"&&ch<="Z")
j--;}else if(ch>="a"&&ch<="z"||ch>="A"&&ch<="Z"){j--;while(j>=0&&(ch=st.charAt(j))>="a"&&ch<="z"||ch>="A"&&ch<="Z")
j--;}else{return"Error: incorrect syntax in "+st+" at position "+j;}
if(i==st.length-1)return"Error: missing argument";k=i+1;ch=st.charAt(k);if(ch>="0"&&ch<="9"||ch=="-"){k++;while(k<st.length&&(ch=st.charAt(k))>="0"&&ch<="9")k++;if(ch=="."){k++;while(k<st.length&&(ch=st.charAt(k))>="0"&&ch<="9")k++;}}else if(ch=="("){nested=1;k++;while(k<st.length&&nested>0){ch=st.charAt(k);if(ch=="(")nested++;else if(ch==")")nested--;k++;}}else if(ch>="a"&&ch<="z"||ch>="A"&&ch<="Z"){k++;while(k<st.length&&(ch=st.charAt(k))>="a"&&ch<="z"||ch>="A"&&ch<="Z")k++;}else{return"Error: incorrect syntax in "+st+" at position "+k;}
st=st.slice(0,j+1)+"pow("+st.slice(j+1,i)+","+st.slice(i+1,k)+")"+
st.slice(k);}
while((i=st.indexOf("!"))!=-1){if(i==0)return"Error: missing argument";j=i-1;ch=st.charAt(j);if(ch>="0"&&ch<="9"){j--;while(j>=0&&(ch=st.charAt(j))>="0"&&ch<="9")j--;if(ch=="."){j--;while(j>=0&&(ch=st.charAt(j))>="0"&&ch<="9")j--;}}else if(ch==")"){nested=1;j--;while(j>=0&&nested>0){ch=st.charAt(j);if(ch=="(")nested--;else if(ch==")")nested++;j--;}
while(j>=0&&(ch=st.charAt(j))>="a"&&ch<="z"||ch>="A"&&ch<="Z")
j--;}else if(ch>="a"&&ch<="z"||ch>="A"&&ch<="Z"){j--;while(j>=0&&(ch=st.charAt(j))>="a"&&ch<="z"||ch>="A"&&ch<="Z")
j--;}else{return"Error: incorrect syntax in "+st+" at position "+j;}
st=st.slice(0,j+1)+"factorial("+st.slice(j+1,i)+")"+st.slice(i+1);}
return st;}
window.addEventListener("resize",resizeThrottler,false);var resizeTimeout,actualResizeHandler;function resizeThrottler(){if(!resizeTimeout){resizeTimeout=setTimeout(function(){resizeTimeout=null;if(typeof(actualResizeHandler)=="function"){actualResizeHandler();}},200);}}
function axes(dx,dy,labels,gdx,gdy){var nanObj={dx:dx,dy:dy,gdx:gdx};for(var name in nanObj){if(isNaN(nanObj[name])||typeof(nanObj[name])=="undefined"){console.log(name+" is not a number! Aborting...");return;}}
if(dx==null&&dy==null){doAxes=0;}
if(gdx==null&&gdy==null){doGrids=0;}
var x,y,ldx,ldy,lx,ly,lxp,lyp,pnode,st;dx=(dx==null?xunitlength:dx*xunitlength);dy=(dy==null?dx:dy*yunitlength);fontsize=Math.max(12,Math.min(dx/2,dy/2,fontsize));ticklength=fontsize/4;if(doGrids==1){gdx=(typeof gdx=="string"?dx:gdx*xunitlength);gdy=(gdy==null?dy:gdy*yunitlength);pnode=document.createElementNS('http://www.w3.org/2000/svg',"path");st="";if(gdx!==null&&gdx!==0&&gdx>0){for(x=origin[0];x<boardWidth;x=x+gdx)
st+=" M"+x.toFixed(2)+",0"+" "+x.toFixed(2)+","+boardHeight.toFixed(2);for(x=origin[0]-gdx;x>0;x=x-gdx)
st+=" M"+x.toFixed(2)+",0"+" "+x.toFixed(2)+","+boardHeight.toFixed(2);}else{console.log("Is your gdx null or otherwise strange? Aborting...");return;}
if(gdy!==null&&gdy!==0&&gdy>0){if(showYaxis==1){if(gdy>0){for(y=boardHeight-origin[1];y<boardHeight-0.99*padding;y=y+gdy){st+=" M0,"+y.toFixed(2)+" "+boardWidth+","+y.toFixed(2);}}
for(y=boardHeight-origin[1]-gdy;y>0.99*padding;y=y-gdy){st+=" M0,"+y.toFixed(2)+" "+boardWidth+","+y.toFixed(2);}}}else{console.log("Is your yMax less than your yMin? Aborting...");return;}
pnode.setAttribute("d",st);pnode.setAttribute("stroke-width",1);pnode.setAttribute("shape-rendering","crispEdges");pnode.setAttribute("stroke",gridstroke);pnode.setAttribute("fill",fill);theSVG.appendChild(pnode);}
if(doAxes==1){st="";pnode=document.createElementNS('http://www.w3.org/2000/svg',"path");st+="M0,"+(boardHeight-origin[1]).toFixed(2)+" "+boardWidth.toFixed(2)+","+(boardHeight-origin[1]).toFixed(2);if(showYaxis==1){st+=" M"+origin[0].toFixed(2)+",0 "+origin[0].toFixed(2)+","+boardHeight.toFixed(2);}
if(dx!==null&&dx>0){for(x=origin[0]+dx;x<boardWidth;x=x+dx){st+=" M"+x.toFixed(2)+","+(boardHeight-origin[1]+ticklength).toFixed(2)+" "+x.toFixed(2)+","+
(boardHeight-origin[1]-ticklength).toFixed(2);}
for(x=origin[0]-dx;x>0;x=x-dx){st+=" M"+x.toFixed(2)+","+(boardHeight-origin[1]+ticklength).toFixed(2)+" "+x.toFixed(2)+","+
(boardHeight-origin[1]-ticklength).toFixed(2);}
if(showYaxis==0){st+=" M"+origin[0].toFixed(2)+","+(boardHeight-origin[1]+ticklength).toFixed(2)+" "+origin[0].toFixed(2)+", "+(boardHeight-origin[1]-ticklength).toFixed(2);}}
if(dy!==null&&dy>0&&showYaxis==1){for(y=boardHeight-origin[1]+dy;y<boardHeight-0.99*padding;y=y+dy){st+=" M"+(origin[0]+ticklength).toFixed(2)+","+y.toFixed(2)+" "+(origin[0]-ticklength).toFixed(2)+","+y.toFixed(2);}
for(y=boardHeight-origin[1]-dy;y>0.99*padding;y=y-dy){st+=" M"+(origin[0]+ticklength).toFixed(2)+","+y.toFixed(2)+" "+(origin[0]-ticklength).toFixed(2)+","+y.toFixed(2);}}
pnode.setAttribute("d",st);pnode.setAttribute("stroke-width",1);pnode.setAttribute("shape-rendering","crispEdges");pnode.setAttribute("stroke",axesstroke);pnode.setAttribute("fill",fill);theSVG.appendChild(pnode);if(labels!=null&&labels!="none")with(Math){ldx=dx/xunitlength;ldy=dy/yunitlength;lx=(xmin>0||xmax<0?xmin:0);ly=(ymin>0||ymax<0?ymin:0);lxp=(ly==0?"below":"above");lyp=(lx==0?"left":"right");if(gdx!==null&&gdx!==0){var ddx=floor(1.1-log(ldx)/log(10))+2;for(x=ldx;x<=xmax;x=x+ldx){text([x,ly],chopZ(x.toFixed(ddx)),lxp);}
for(x=-ldx;xmin<=x;x=x-ldx)
text([x,ly],chopZ(x.toFixed(ddx)),lxp);if(showYaxis==0){text([0,ly],0,lxp);}}
if(gdy!==null&&gdy!==0){var ddy=Math.max(0,floor(1.1-log(ldy)/log(10))+2);if(ddy<0){console.log("ddy is < 0. Aborting...");return;}
if(showYaxis==1){for(y=ldy;y<=ymax;y=y+ldy){text([lx,y],chopZ(y.toFixed(ddy)),lyp);}
for(y=-ldy;ymin<=y;y=y-ldy)
text([lx,y],chopZ(y.toFixed(ddy)),lyp);}}}
if(typeof(xAxisVble)=="undefined"){xAxisVble=window.xAxisVble;}
if(typeof(yAxisVble)=="undefined"){yAxisVble=window.yAxisVble;}
txtLabelsClass="intmathItalic";text([xmax+(padding-10)/xunitlength,0],xAxisVble,"above",svgID+"xAxVbl","",'KaTeX_Math,"Times New Roman",Times,serif');if(showYaxis==1){text([0,ymax+(padding-10)/yunitlength],yAxisVble,"right",svgID+"yAxVbl","",'KaTeX_Math,"Times New Roman",Times,serif');}
txtLabelsClass="intmath";markerstrokewidth=0.5;stroke="#555";arrowhead([0,0],[xmax+padding/xunitlength,0],"xaxisArr");if(showYaxis==1){arrowhead([0,0],[0,ymax+padding/yunitlength],"yaxisArr");}}}
function initBoard(divID,x_min,x_max,y_min,y_max){boundingDiv=gebi(divID);boundingDiv.style.position="relative";boardWidth=boundingDiv.getBoundingClientRect().width;boardHeight=Math.round(boardWidthToHeight*boardWidth);boardLeft=boundingDiv.getBoundingClientRect().left;boardTop=boundingDiv.getBoundingClientRect().top;svgID=divID+'SVG';brdID=divID
makeSVG('svg',{id:svgID,width:boardWidth,height:boardHeight},brdID);theSVG=gebi(svgID);currCartMatrix[brdID]=[];strokewidth="1";strokedasharray=null;stroke="black";fill="none";fontstyle="normal";fontfamily='KaTeX_Main,"Times New Roman",Times,serif';fontweight="normal";fontstroke="none";fontfill="none";marker="none";ymax=null;xmin=x_min;xmax=x_max;ymin=y_min;ymax=y_max;if(xmin>=xmax){xmax++;}
if(ymin>=ymax&&ymax!=null){ymax++;}
xunitlength=(boardWidth-2*padding)/(xmax-xmin);yunitlength=xunitlength;if(ymax==null){ymax=ymin+(boardHeight-2*padding)/yunitlength;}else{yunitlength=(boardHeight-2*padding)/(ymax-ymin);}
origin=[-xmin*xunitlength+padding,-ymin*yunitlength+padding];boardPropsArr[brdID+"xMin"]=xmin;boardPropsArr[brdID+"yMin"]=ymin;boardPropsArr[brdID+"xMax"]=xmax;boardPropsArr[brdID+"yMax"]=ymax;boardPropsArr[brdID+"Width"]=boardWidth;boardPropsArr[brdID+"Height"]=boardHeight;boardPropsArr[brdID+"Left"]=boardLeft;boardPropsArr[brdID+"Top"]=boardTop;boardPropsArr[brdID+"XuL"]=xunitlength;boardPropsArr[brdID+"YuL"]=yunitlength;boardPropsArr[brdID+"ox"]=origin[0];boardPropsArr[brdID+"oy"]=origin[1];boardPropsArr[brdID+"pad"]=padding;brdPropsArr[brdID]=[];brdPropsArr[brdID]["xMin"]=xmin;brdPropsArr[brdID]["yMin"]=ymin;brdPropsArr[brdID]["actualXmin"]=xmin-padding/xunitlength;brdPropsArr[brdID]["actualYmin"]=ymin-padding/yunitlength;brdPropsArr[brdID]["xMax"]=xmax;brdPropsArr[brdID]["yMax"]=ymax;brdPropsArr[brdID]["actualXmax"]=xmax+padding/xunitlength;brdPropsArr[brdID]["actualYmax"]=ymax+padding/yunitlength;var yRange=brdPropsArr[brdID]["yMax"]-brdPropsArr[brdID]["yMin"];var extendAmt=0.25;var plotYmin=brdPropsArr[brdID]["actualYmin"]-extendAmt*yRange;var plotYmax=brdPropsArr[brdID]["actualYmax"]+extendAmt*yRange;brdPropsArr[brdID]["plotYmin"]=plotYmin;brdPropsArr[brdID]["plotYmax"]=plotYmax;brdPropsArr[brdID]["brdWidth"]=boardWidth;brdPropsArr[brdID]["brdHeight"]=boardHeight;brdPropsArr[brdID]["Left"]=boardLeft;brdPropsArr[brdID]["Top"]=boardTop;brdPropsArr[brdID]["XuL"]=xunitlength;brdPropsArr[brdID]["YuL"]=yunitlength;brdPropsArr[brdID]["ox"]=origin[0];brdPropsArr[brdID]["oy"]=origin[1];brdPropsArr[brdID]["pad"]=padding;brdPropsNS=brdPropsArr[brdID];var boardBG=makeSVG('rect',{id:"brdBg_"+brdID,x:0,y:0,width:boardWidth+"px",height:boardHeight+"px",stroke:'none',fill:'white'},svgID);}